<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Há»c Tiáº¿ng Pháº§n Lan A1</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- User Selector Modal -->
    <div class="user-modal" id="userModal">
        <div class="user-modal-content">
            <h3 id="modalTitle">ğŸ‘¤ ÄÄƒng nháº­p</h3>

            <!-- Login Form -->
            <div id="loginForm">
                <div id="userList"></div>
                <div class="user-form">
                    <input type="text" id="loginUsername" placeholder="TÃªn tÃ i khoáº£n" maxlength="20">
                    <input type="password" id="loginPassword" placeholder="Máº­t kháº©u" maxlength="30">
                    <button onclick="loginUser()">ÄÄƒng nháº­p</button>
                </div>
                <p class="form-switch">ChÆ°a cÃ³ tÃ i khoáº£n? <a href="#" onclick="showRegister(); return false;">ÄÄƒng kÃ½</a></p>
            </div>

            <!-- Register Form (hidden by default) -->
            <div id="registerForm" style="display: none;">
                <div class="user-form">
                    <input type="text" id="regUsername" placeholder="TÃªn tÃ i khoáº£n (Ã­t nháº¥t 2 kÃ½ tá»±)" maxlength="20">
                    <input type="password" id="regPassword" placeholder="Máº­t kháº©u (Ã­t nháº¥t 3 kÃ½ tá»±)" maxlength="30">
                    <button onclick="registerUser()">ÄÄƒng kÃ½</button>
                </div>
                <p class="form-switch">ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="#" onclick="showLogin(); return false;">ÄÄƒng nháº­p</a></p>
            </div>

            <p id="authMessage" class="auth-message"></p>
        </div>
    </div>

    <!-- Mobile Header -->
    <header class="mobile-header">
        <a href="index.html" class="logo">ğŸ‡«ğŸ‡® Suomi A1</a>
        <div class="header-right">
            <button class="user-btn" id="userBtn" onclick="toggleUserModal()">ğŸ‘¤</button>
            <button class="menu-toggle" id="menuToggle">
                <span></span><span></span><span></span>
            </button>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">ğŸ‡«ğŸ‡® Suomi A1</a>
            <div class="sidebar-actions">
                <button class="user-btn" id="userBtnDesktop" onclick="toggleUserModal()">ğŸ‘¤</button>
                <button class="dark-toggle" id="darkToggle">ğŸŒ™</button>
            </div>
        </div>
        <ul class="nav-menu">
            <li><a href="index.html" class="nav-link active"><span class="icon">ğŸ </span> Trang chá»§</a></li>
            <li><a href="pages/alphabet.html" class="nav-link"><span class="icon">ğŸ”¤</span> Báº£ng chá»¯ cÃ¡i</a></li>
            <li><a href="pages/pronunciation.html" class="nav-link"><span class="icon">ğŸ¯</span> PhÃ¡t Ã¢m</a></li>
            <li><a href="pages/grammar.html" class="nav-link"><span class="icon">ğŸ“–</span> Ngá»¯ phÃ¡p</a></li>
            <li><a href="pages/verbs.html" class="nav-link"><span class="icon">âš¡</span> Chia Ä‘á»™ng tá»«</a></li>
            <li><a href="pages/vocabulary.html" class="nav-link"><span class="icon">ğŸ“š</span> Tá»« vá»±ng</a></li>
            <li><a href="pages/phrases.html" class="nav-link"><span class="icon">ğŸ’¬</span> Máº«u cÃ¢u</a></li>
            <li><a href="pages/practice.html" class="nav-link"><span class="icon">âœï¸</span> Luyá»‡n táº­p</a></li>
            <li><a href="pages/roadmap.html" class="nav-link"><span class="icon">ğŸ—ºï¸</span> Lá»™ trÃ¬nh 30 ngÃ y</a></li>
        </ul>
        <div class="sidebar-footer">
            <p>Progress: <span id="progressPercent">0%</span></p>
            <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-home">
            <div class="hero-bg"></div>
            <div class="hero-content">
                <h1>ğŸ‡«ğŸ‡® Há»c Tiáº¿ng Pháº§n Lan A1</h1>
                <p class="subtitle">Tá»« zero Ä‘áº¿n giao tiáº¿p cÆ¡ báº£n trong 30 ngÃ y</p>
                <a href="pages/roadmap.html" class="btn btn-primary btn-lg">
                    ğŸš€ Báº¯t Ä‘áº§u lá»™ trÃ¬nh 30 ngÃ y
                </a>
            </div>
        </section>

        <!-- Quick Stats -->
        <section class="stats-section">
            <div class="stat-card">
                <span class="stat-number">29</span>
                <span class="stat-label">Chá»¯ cÃ¡i</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">6</span>
                <span class="stat-label">Loáº¡i Ä‘á»™ng tá»«</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">500+</span>
                <span class="stat-label">Tá»« vá»±ng</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">100+</span>
                <span class="stat-label">Máº«u cÃ¢u</span>
            </div>
        </section>

        <!-- Course Overview -->
        <section class="course-grid">
            <h2 class="section-title">ğŸ“š Ná»™i dung khÃ³a há»c</h2>

            <div class="course-cards">
                <a href="pages/alphabet.html" class="course-card">
                    <div class="card-icon">ğŸ”¤</div>
                    <h3>Báº£ng chá»¯ cÃ¡i</h3>
                    <p>29 chá»¯ cÃ¡i vá»›i phÃ¡t Ã¢m chi tiáº¿t, Ä‘áº·c biá»‡t J, Y, Ã„, Ã–</p>
                    <span class="card-badge">CÆ¡ báº£n</span>
                </a>

                <a href="pages/pronunciation.html" class="course-card">
                    <div class="card-icon">ğŸ¯</div>
                    <h3>PhÃ¡t Ã¢m</h3>
                    <p>NguyÃªn Ã¢m kÃ©p, phá»¥ Ã¢m kÃ©p, quy táº¯c phÃ¡t Ã¢m quan trá»ng</p>
                    <span class="card-badge">CÆ¡ báº£n</span>
                </a>

                <a href="pages/grammar.html" class="course-card">
                    <div class="card-icon">ğŸ“–</div>
                    <h3>Ngá»¯ phÃ¡p</h3>
                    <p>Äáº¡i tá»«, Ä‘á»™ng tá»« OLLA, cÃ¡c cÃ¡ch (cases), cáº¥u trÃºc cÃ¢u</p>
                    <span class="card-badge">Quan trá»ng</span>
                </a>

                <a href="pages/verbs.html" class="course-card featured">
                    <div class="card-icon">âš¡</div>
                    <h3>Chia Ä‘á»™ng tá»«</h3>
                    <p>6 loáº¡i Ä‘á»™ng tá»« vá»›i sÆ¡ Ä‘á»“ cÃ¢y dá»… hiá»ƒu, vÃ­ dá»¥ thá»±c táº¿</p>
                    <span class="card-badge hot">Quan trá»ng nháº¥t</span>
                </a>

                <a href="pages/vocabulary.html" class="course-card">
                    <div class="card-icon">ğŸ“š</div>
                    <h3>Tá»« vá»±ng</h3>
                    <p>500+ tá»« theo 12 chá»§ Ä‘á» vá»›i cÃ¢u vÃ­ dá»¥ thá»±c táº¿</p>
                    <span class="card-badge">Thiáº¿t yáº¿u</span>
                </a>

                <a href="pages/phrases.html" class="course-card">
                    <div class="card-icon">ğŸ’¬</div>
                    <h3>Máº«u cÃ¢u giao tiáº¿p</h3>
                    <p>100+ máº«u cÃ¢u theo tÃ¬nh huá»‘ng thá»±c táº¿ hÃ ng ngÃ y</p>
                    <span class="card-badge">Thá»±c hÃ nh</span>
                </a>

                <a href="pages/practice.html" class="course-card">
                    <div class="card-icon">âœï¸</div>
                    <h3>Luyá»‡n táº­p</h3>
                    <p>Flashcards, Quiz, bÃ i táº­p tÆ°Æ¡ng tÃ¡c</p>
                    <span class="card-badge">Ã”n táº­p</span>
                </a>

                <a href="pages/roadmap.html" class="course-card featured">
                    <div class="card-icon">ğŸ—ºï¸</div>
                    <h3>Lá»™ trÃ¬nh 30 ngÃ y</h3>
                    <p>Káº¿ hoáº¡ch há»c chi tiáº¿t tá»«ng ngÃ y vá»›i bÃ i táº­p</p>
                    <span class="card-badge hot">Báº¯t Ä‘áº§u Ä‘Ã¢y!</span>
                </a>
            </div>
        </section>

        <!-- Quick Start -->
        <section class="quick-start">
            <h2 class="section-title">âš¡ Báº¯t Ä‘áº§u nhanh</h2>
            <div class="quick-phrases">
                <div class="phrase-card" onclick="speak('Hei')">
                    <span class="finnish">Hei!</span>
                    <span class="vietnamese">Xin chÃ o!</span>
                    <button class="speak-btn">ğŸ”Š</button>
                </div>
                <div class="phrase-card" onclick="speak('Kiitos')">
                    <span class="finnish">Kiitos!</span>
                    <span class="vietnamese">Cáº£m Æ¡n!</span>
                    <button class="speak-btn">ğŸ”Š</button>
                </div>
                <div class="phrase-card" onclick="speak('Minun nimeni on')">
                    <span class="finnish">Minun nimeni on...</span>
                    <span class="vietnamese">TÃªn tÃ´i lÃ ...</span>
                    <button class="speak-btn">ğŸ”Š</button>
                </div>
                <div class="phrase-card" onclick="speak('NÃ¤kemiin')">
                    <span class="finnish">NÃ¤kemiin!</span>
                    <span class="vietnamese">Táº¡m biá»‡t!</span>
                    <button class="speak-btn">ğŸ”Š</button>
                </div>
            </div>
        </section>

        <!-- Tips -->
        <section class="tips-section">
            <h2 class="section-title">ğŸ’¡ Máº¹o há»c hiá»‡u quáº£</h2>
            <div class="tips-grid">
                <div class="tip-item">
                    <span class="tip-icon">â°</span>
                    <h4>15-20 phÃºt/ngÃ y</h4>
                    <p>Há»c Ã­t nhÆ°ng Ä‘á»u Ä‘áº·n má»—i ngÃ y</p>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">ğŸ”„</span>
                    <h4>Láº·p láº¡i ngáº¯t quÃ£ng</h4>
                    <p>Ã”n sau 1â†’3â†’7â†’30 ngÃ y</p>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">ğŸ¤</span>
                    <h4>NÃ³i to</h4>
                    <p>Äá»c to má»—i cÃ¢u Ã­t nháº¥t 5 láº§n</p>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">âœï¸</span>
                    <h4>Viáº¿t tay</h4>
                    <p>Viáº¿t ra giáº¥y nhá»› lÃ¢u hÆ¡n</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Overlay for mobile menu -->
    <div class="overlay" id="overlay"></div>

    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
    <script>
        // User account functions
        function toggleUserModal() {
            const modal = document.getElementById('userModal');
            modal.classList.toggle('active');
            clearAuthMessage();
            renderUserList();

            // If logged in, show logout option
            const current = userAccount.getCurrentUser();
            if (current) {
                document.getElementById('modalTitle').textContent = 'ğŸ‘¤ ' + current;
            } else {
                document.getElementById('modalTitle').textContent = 'ğŸ‘¤ ÄÄƒng nháº­p';
                showLogin();
            }
        }

        function renderUserList() {
            const list = document.getElementById('userList');
            const usernames = userAccount.getUsernames();
            const current = userAccount.getCurrentUser();

            // If logged in, show logout button
            if (current) {
                list.innerHTML = `
                    <div class="logged-in-info">
                        <p>Äang Ä‘Äƒng nháº­p: <strong>${current}</strong></p>
                        <button class="logout-btn" onclick="logoutUser()">ÄÄƒng xuáº¥t</button>
                    </div>
                `;
                document.getElementById('loginForm').querySelector('.user-form').style.display = 'none';
                document.getElementById('loginForm').querySelector('.form-switch').style.display = 'none';
                return;
            }

            // Show existing accounts for quick select
            document.getElementById('loginForm').querySelector('.user-form').style.display = 'flex';
            document.getElementById('loginForm').querySelector('.form-switch').style.display = 'block';

            if (usernames.length === 0) {
                list.innerHTML = '<p style="color: var(--text-light); font-size: 0.85rem;">ChÆ°a cÃ³ tÃ i khoáº£n nÃ o. HÃ£y Ä‘Äƒng kÃ½!</p>';
                return;
            }

            list.innerHTML = '<p style="color: var(--text-light); font-size: 0.85rem; margin-bottom: 8px;">Chá»n tÃ i khoáº£n:</p>' +
                usernames.map(name => `
                    <div class="user-item" onclick="fillUsername('${name}')">
                        <span>ğŸ‘¤ ${name}</span>
                    </div>
                `).join('');
        }

        function fillUsername(name) {
            document.getElementById('loginUsername').value = name;
            document.getElementById('loginPassword').focus();
        }

        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('modalTitle').textContent = 'ğŸ‘¤ ÄÄƒng nháº­p';
            clearAuthMessage();
        }

        function showRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('modalTitle').textContent = 'ğŸ‘¤ ÄÄƒng kÃ½';
            clearAuthMessage();
        }

        function loginUser() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!username || !password) {
                showAuthMessage('Vui lÃ²ng nháº­p tÃªn vÃ  máº­t kháº©u!', 'error');
                return;
            }

            const result = userAccount.login(username, password);
            if (!result.success) {
                showAuthMessage(result.message, 'error');
            }
            // If success, page will reload
        }

        function registerUser() {
            const username = document.getElementById('regUsername').value.trim();
            const password = document.getElementById('regPassword').value;

            const result = userAccount.register(username, password);
            if (result.success) {
                showAuthMessage('ÄÄƒng kÃ½ thÃ nh cÃ´ng! Äang Ä‘Äƒng nháº­p...', 'success');
                // Auto login after register
                setTimeout(() => {
                    userAccount.login(username, password);
                }, 1000);
            } else {
                showAuthMessage(result.message, 'error');
            }
        }

        function logoutUser() {
            userAccount.logout();
        }

        function showAuthMessage(msg, type) {
            const el = document.getElementById('authMessage');
            el.textContent = msg;
            el.className = 'auth-message ' + type;
        }

        function clearAuthMessage() {
            document.getElementById('authMessage').textContent = '';
            document.getElementById('authMessage').className = 'auth-message';
        }

        // Update user button with current name
        document.addEventListener('DOMContentLoaded', () => {
            const current = userAccount.getCurrentUser();
            const btns = [document.getElementById('userBtn'), document.getElementById('userBtnDesktop')];
            btns.forEach(btn => {
                if (btn && current) {
                    btn.textContent = current.charAt(0).toUpperCase();
                    btn.title = current;
                }
            });
        });

        // Close modal when clicking outside
        document.getElementById('userModal').addEventListener('click', (e) => {
            if (e.target.id === 'userModal') toggleUserModal();
        });

        // Allow Enter key to submit forms
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('loginPassword').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') loginUser();
            });
            document.getElementById('regPassword').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') registerUser();
            });
        });
    </script>
</body>
</html>
